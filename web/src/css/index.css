/*
simplechat - chat with AI
    Copyright (C) 2024 Michael Manis - michaelmanis@tutanota.com
    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as published
    by the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.
    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.
    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <https://www.gnu.org/licenses/>.
*/

/*
From:
https://www.freecodecamp.org/news/design-imessage-like-chat-bubble-react-native/
*/

/*
Media queries from:
https://stackoverflow.com/questions/6370690/media-queries-how-to-target-desktop-tablet-and-mobile
 */

/*
Media queries from:
https://stackoverflow.com/questions/6370690/media-queries-how-to-target-desktop-tablet-and-mobile
 */

:root {
    --send-bg: #0B93F6;
    --send-color: white;
    --receive-bg: #E5E5EA;
    --receive-text: black;
    --page-background: white;
    --name-color: grey;
    --max-width: 900px;
    --desktop-height: 60vh;
    --font-size: 20px;
    --font-family: "Helvetica Neue", Helvetica, sans-serif;
}

html {
    overflow: hidden;
}

body {
    font-family: var(--font-family);
    font-size: var(--font-size);
    font-weight: normal;
    max-width: var(--max-width);
    background-color: var(--page-background);
    overflow: hidden;

    /* smartphones, iPhone, portrait 480x320 phones */
    @media (min-width:320px)  {
        margin: 0 auto;
    }

    /* portrait tablets, portrait iPad, landscape e-readers, landscape 800x480 or 854x480 phones */
    @media (min-width:641px)  {
        height: 60vh;
        max-height: var(--desktop-height);
        margin: 50px auto;
    }
}

p {
    word-wrap: break-word;
    margin: 2px 12px;
    line-height: 24px;
    position: relative;
    padding: 10px 20px;
    border-radius: 25px;

    /* smartphones, iPhone, portrait 480x320 phones */
    @media (min-width:320px)  {
        max-width: 80vw;
    }

    /* portrait tablets, portrait iPad, landscape e-readers, landscape 800x480 or 854x480 phones */
    @media (min-width:641px)  {
        max-width: calc(var(--max-width) / 2);
    }

    &:before, &:after {
        content: "";
        position: absolute;
        bottom: 0;
        height: 25px;
    }
}

p.user {
    color: var(--send-color);
    background: var(--send-bg);
    align-self: flex-end;

    &:before {
        right: -7px;
        width: 20px;
        background-color: var(--send-bg);
        border-bottom-left-radius: 16px 14px;
    }

    &:after {
        right: -26px;
        width: 26px;
        background-color: var(--page-background);
        border-bottom-left-radius: 10px;
    }
}

p.assistant {
    background: var(--receive-bg);
    color: black;
    align-self: flex-start;

    &:before {
        left: -7px;
        width: 20px;
        background-color: var(--receive-bg);
        border-bottom-right-radius: 16px 14px;
    }

    &:after {
        left: -26px;
        width: 26px;
        background-color: var(--page-background);
        border-bottom-right-radius: 10px;
    }
}

inline {
    margin-top: 12px;
    margin-left: 12px;
    margin-right: 12px;
    font-size: 16px;
    color: var(--name-color);
}

inline.user {
    align-self: flex-end;
}

#div-chat-area {
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    overflow-x: hidden;
    margin-bottom: 10px;

    /* smartphones, iPhone, portrait 480x320 phones */
    @media (min-width:320px)  {
        height: calc(100vh - 2.5em);
    }

    /* portrait tablets, portrait iPad, landscape e-readers, landscape 800x480 or 854x480 phones */
    @media (min-width:641px)  {
        height: calc(var(--desktop-height) - 2.5em);
    }
}

div.chatbox {
    display: flex;
    flex-direction: row;
    border-radius: 100vmax;
    border-style: solid;
    border-color: var(--name-color);
    border-width: 2px;
    max-width: var(--max-width);
    input {
        padding-left: 14px;
        flex-grow: 85;
        border: none;
        background: none;
        resize: none;
        font-family: var(--font-family);
        font-size: var(--font-size);
    }
    button {
        font-family: var(--font-family);
        font-size: var(--font-size);
        flex-grow: 15;
        border-radius: 100vmax;
        margin: 4px;
        border: none;
        background-color: var(--send-bg);
        color: var(--send-color);
    }
}